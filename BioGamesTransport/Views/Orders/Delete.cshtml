@model BioGamesTransport.Data.SQL.Orders

@{
    ViewData["Title"] = "TÖRLÉS";
}

<h2>TÖRLÉS</h2>

<h3>Biztos benne, hogy törölni szeretné ezt a megrendelést?</h3>
<div>
    <h4>Rendelés</h4>
    <hr />
    <table class="table table-striped table-bordered table-hover">
        <tr>
            <th>@Html.DisplayNameFor(model => model.OrderOutRef)</th>
            <th>@Html.DisplayNameFor(model => model.OrderStatus)</th>
            <th>@Html.DisplayNameFor(model => model.ShipStatus)</th>

            <th>@Html.DisplayNameFor(model => model.Payment)</th>
            <th>@Html.DisplayNameFor(model => model.Shipment)</th>
            <th>@Html.DisplayNameFor(model => model.Shop)</th>
            <th>@Html.DisplayNameFor(model => model.Comment)</th>

        </tr>
        <tr>
            <td>@Html.DisplayFor(model => model.OrderOutRef)</td>
            <td><button id="@Html.DisplayFor(model => model.Id)" data-toggle="modal" data-target="#myModal_statusz" type="button" class=" btn btn-@Html.DisplayFor(model => model.OrderStatus.Color) btn-xs"> @Html.DisplayFor(model => model.OrderStatus.Name) </button></td>
            <td><button type="button" class="btn btn-@Html.DisplayFor(model => model.ShipStatus.Color) btn-xs"> @Html.DisplayFor(model => model.ShipStatus.Name) </button></td>

            <td>@Html.DisplayFor(model => model.Payment)</td>
            <td>@Html.DisplayFor(model => model.Shipment)</td>
            <td>@Html.DisplayFor(model => model.Shop.Name)</td>
            <td>@Html.DisplayFor(model => model.Comment)</td>

        </tr>
    </table>
    <table class="table table-striped table-bordered table-hover">
        <tr>
            <th>@Html.DisplayNameFor(model => model.OrderDatetime)</th>
            <th>@Html.DisplayNameFor(model => model.DepositDate)</th>
            <th>@Html.DisplayNameFor(model => model.ShipUndertakenDate)</th>
            <th>@Html.DisplayNameFor(model => model.ShipExpectedDate)</th>
            <th>@Html.DisplayNameFor(model => model.ShipDeliveredDate)</th>
        </tr>
        <tr>

            <td>@Html.DisplayFor(model => model.OrderDatetime) | @Html.DisplayFor(model => model.OrderDatetimeCal) napja megrendelve</td>
            <td>@Html.DisplayFor(model => model.DepositDate) | @Html.DisplayFor(model => model.DepositDateCal) napja befizetve</td>
            <td style="@if (Model.ShipUndertakenDateCal > 0) { Write("color:red;"); }">@Html.DisplayFor(model => model.ShipUndertakenDate) | @Html.DisplayFor(model => model.ShipUndertakenDateCal) @{if (Model.ShipUndertakenDateCal > 0) { Write("napja lejárt"); } else { Write("nap van hátra"); }}</td>
            <td style="@if (Model.ShipExpectedDateCal > 0) { Write("color:red;"); }">@Html.DisplayFor(model => model.ShipExpectedDate) | @Html.DisplayFor(model => model.ShipExpectedDateCal) @{if (Model.ShipExpectedDateCal > 0) { Write("napja lejárt"); } else { Write("nap van hátra"); }}</td>
            <td>@Html.DisplayFor(model => model.ShipDeliveredDate)</td>
        </tr>
    </table>
    <table class="table table-striped table-bordered table-hover">
        <tr>
            <th>Pénzügy</th>
            <th>@Html.DisplayNameFor(model => model.Profit)</th>
            <th>@Html.DisplayNameFor(model => model.TotalPrice)</th>
            <th>@Html.DisplayNameFor(model => model.Deposit)</th>
            <th>@Html.DisplayNameFor(model => model.Residual)</th>
            <th>@Html.DisplayNameFor(model => model.ProdCount)</th>


        </tr>
        <tr>

            <td style="font-weight:bold; @if (Model.Residual > 0) { Write("color:red;"); } else { { Write("color:green;"); }} ">
                @if (Model.Residual == 0)
                {
                    Write("Fizetve");
                }
                else
                {
                    Write("Nincs kiegyenlítve");
                }
            </td>
            <td>@Html.DisplayFor(model => model.Profit)</td>
            <td>@Html.DisplayFor(model => model.TotalPrice)</td>
            <td>@Html.DisplayFor(model => model.Deposit)</td>
            <td style="@if (Model.Residual > 0) { Write("color:red;"); }">@Html.DisplayFor(model => model.Residual)</td>
            <td>@Html.DisplayFor(model => model.ProdCount)</td>


        </tr>
    </table>
    <table class="table table-striped table-bordered table-hover">

        <tr>
            <th>@Html.DisplayNameFor(model => model.OrderDetails.Last().Images)</th>
            <th>@Html.DisplayNameFor(model => model.OrderDetails.Last().ProductName)</th>
            <th>@Html.DisplayNameFor(model => model.OrderDetails.Last().ProductRef)</th>
            <th>@Html.DisplayNameFor(model => model.OrderDetails.Last().Price)</th>
            <th>@Html.DisplayNameFor(model => model.OrderDetails.Last().PurchasePrice)</th>
            <th>@Html.DisplayNameFor(model => model.OrderDetails.Last().Quantity)</th>
            <th>@Html.DisplayNameFor(model => model.OrderDetails.Last().Profit)</th>
            <th>@Html.DisplayNameFor(model => model.OrderDetails.Last().InStock)</th>
            <th>@Html.DisplayNameFor(model => model.OrderDetails.Last().ShipUndertakenDate)</th>
            <th>@Html.DisplayNameFor(model => model.OrderDetails.Last().ShipExpectedDate)</th>
            <th>@Html.DisplayNameFor(model => model.OrderDetails.Last().ShipStatusId)</th>
            <th>@Html.DisplayNameFor(model => model.OrderDetails.Last().Comment)</th>


  
        </tr>


        @foreach (var item in Model.OrderDetails)
        {
            <tr>
                <td class="text-center"> <img class="img-thumbnail" style="max-width:100px;" src='@Url.Action( "ShowImg", "images", new { id = item.ImagesId })' /></td>
                <td class="text-center">@Html.DisplayFor(model => item.ProductName)</td>
                <td class="text-center">@Html.DisplayFor(model => item.ProductRef)</td>
                <td class="text-center">@Html.DisplayFor(model => item.Price)</td>
                <td class="text-center">@Html.DisplayFor(model => item.PurchasePrice)</td>
                <td class="text-center">@Html.DisplayFor(model => item.Quantity)</td>
                <td class="text-center">@Html.DisplayFor(model => item.Profit)</td>
                <td class="text-center">@Html.DisplayFor(model => item.InStock)</td>
                <td class="text-center">@Html.DisplayFor(model => item.ShipUndertakenDate)</td>
                <td class="text-center">@Html.DisplayFor(model => item.ShipExpectedDate)</td>
                <td class="text-center"><button type="button" class="btn btn-@Html.DisplayFor(model => item.ShipStatus.Color) btn-xs"> @Html.DisplayFor(model => item.ShipStatus.Name) </button></td>
                <td class="text-center">@Html.DisplayFor(model => item.Comment)</td>
              
            </tr>

        }


    </table>
    <form asp-action="Delete">
        <input type="hidden" asp-for="Id" />
        <input type="submit" value="Törlés" class="btn btn-danger" />
        <span style="padding-left:50px;"></span>
        <a class="btn btn-primary" asp-controller="Orders" asp-action="Details" asp-route-id="@Model.Id">MÉGSEM</a>
    </form>
</div>
